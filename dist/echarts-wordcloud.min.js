!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("echarts")):"function"==typeof define&&define.amd?define(["echarts"],e):"object"==typeof exports?exports["echarts-wordcloud"]=e(require("echarts")):t["echarts-wordcloud"]=e(t.echarts)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){var n={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},r={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},i=Object.prototype.toString,a=Array.prototype,o=a.forEach,u=a.filter,s=a.slice,l=a.map,c=a.reduce,f={};function d(t){if(null==t||"object"!=typeof t)return t;var e=t,a=i.call(t);if("[object Array]"===a){if(!S(t)){e=[];for(var o=0,u=t.length;o<u;o++)e[o]=d(t[o])}}else if(r[a]){if(!S(t)){var s=t.constructor;if(t.constructor.from)e=s.from(t);else{e=new s(t.length);for(o=0,u=t.length;o<u;o++)e[o]=d(t[o])}}}else if(!n[a]&&!S(t)&&!b(t))for(var l in e={},t)t.hasOwnProperty(l)&&(e[l]=d(t[l]));return e}function h(t,e,n){if(!w(e)||!w(t))return n?d(e):t;for(var r in e)if(e.hasOwnProperty(r)){var i=t[r],a=e[r];!w(a)||!w(i)||x(a)||x(i)||b(a)||b(i)||M(a)||M(i)||S(a)||S(i)?!n&&r in t||(t[r]=d(e[r])):h(i,a,n)}return t}function m(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n?null!=e[r]:null==t[r])&&(t[r]=e[r]);return t}var p,g=function(){return f.createCanvas()};function v(t,e,n){if(t&&e)if(t.forEach&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function y(t,e){var n=s.call(arguments,2);return function(){return t.apply(e,n.concat(s.call(arguments)))}}function x(t){return"[object Array]"===i.call(t)}function w(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function M(t){return!!n[i.call(t)]}function b(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}f.createCanvas=function(){return document.createElement("canvas")};function S(t){return t.__ec_primitive__}function C(t){var e=x(t);this.data={};var n=this;function r(t,r){e?n.set(t,r):n.set(r,t)}t instanceof C?t.each(r):t&&v(t,r)}C.prototype={constructor:C,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=y(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}},e.$override=function(t,e){"createCanvas"===t&&(p=null),f[t]=e},e.clone=d,e.merge=h,e.mergeAll=function(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=h(n,t[r],e);return n},e.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.defaults=m,e.createCanvas=g,e.getContext=function(){return p||(p=g().getContext("2d")),p},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},e.inherits=function(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e},e.mixin=function(t,e,n){m(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=v,e.map=function(t,e,n){if(t&&e){if(t.map&&t.map===l)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r}},e.reduce=function(t,e,n,r){if(t&&e){if(t.reduce&&t.reduce===c)return t.reduce(e,n,r);for(var i=0,a=t.length;i<a;i++)n=e.call(r,n,t[i],i,t);return n}},e.filter=function(t,e,n){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,n);for(var r=[],i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}},e.find=function(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]},e.bind=y,e.curry=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},e.isArray=x,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===i.call(t)},e.isObject=w,e.isBuiltInObject=M,e.isTypedArray=function(t){return!!r[i.call(t)]},e.isDom=b,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,n){return null!=t?t:null!=e?e:n},e.slice=function(){return Function.call.apply(s,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.trim=function(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e.setAsPrimitive=function(t){t.__ec_primitive__=!0},e.isPrimitive=S,e.createHashMap=function(t){return new C(t)},e.concatArray=function(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n},e.noop=function(){}},function(e,n){e.exports=t},function(t,e,n){(function(t){var n;"undefined"!=typeof window?n=window.__DEV__:void 0!==t&&(n=t.__DEV__),void 0===n&&(n=!0);var r=n;e.__DEV__=r}).call(this,n(21))},function(t,e,n){var r,i,a,o,u=n(11),s=n(12),l=u.applyTransform,c=Math.min,f=Math.max;function d(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}d.prototype={constructor:d,union:function(t){var e=c(t.x,this.x),n=c(t.y,this.y);this.width=f(t.x+t.width,this.x+this.width)-e,this.height=f(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(r=[],i=[],a=[],o=[],function(t){if(t){r[0]=a[0]=this.x,r[1]=o[1]=this.y,i[0]=o[0]=this.x+this.width,i[1]=a[1]=this.y+this.height,l(r,r,t),l(i,i,t),l(a,a,t),l(o,o,t),this.x=c(r[0],i[0],a[0],o[0]),this.y=c(r[1],i[1],a[1],o[1]);var e=f(r[0],i[0],a[0],o[0]),n=f(r[1],i[1],a[1],o[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=this,n=t.width/e.width,r=t.height/e.height,i=s.create();return s.translate(i,i,[-e.x,-e.y]),s.scale(i,i,[n,r]),s.translate(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof d||(t=d.create(t));var e=this,n=e.x,r=e.x+e.width,i=e.y,a=e.y+e.height,o=t.x,u=t.x+t.width,s=t.y,l=t.y+t.height;return!(r<o||u<n||a<s||l<i)},contain:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},clone:function(){return new d(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},d.create=function(t){return new d(t.x,t.y,t.width,t.height)};var h=d;t.exports=h},function(t,e,n){var r=n(0);var i=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function a(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}e.linearMap=function(t,e,n,r){var i=e[1]-e[0],a=n[1]-n[0];if(0===i)return 0===a?n[0]:(n[0]+n[1])/2;if(r)if(i>0){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/i*a+n[0]},e.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?(n=t,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var n},e.round=function(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t},e.asc=function(t){return t.sort((function(t,e){return t-e})),t},e.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n},e.getPrecisionSafe=function(t){var e=t.toString(),n=e.indexOf("e");if(n>0){var r=+e.slice(n+1);return r<0?-r:0}var i=e.indexOf(".");return i<0?0:e.length-1-i},e.getPixelPrecision=function(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),a=Math.round(n(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20},e.getPercentWithPrecision=function(t,e,n){if(!t[e])return 0;var i=r.reduce(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===i)return 0;for(var a=Math.pow(10,n),o=r.map(t,(function(t){return(isNaN(t)?0:t)/i*a*100})),u=100*a,s=r.map(o,(function(t){return Math.floor(t)})),l=r.reduce(s,(function(t,e){return t+e}),0),c=r.map(o,(function(t,e){return t-s[e]}));l<u;){for(var f=Number.NEGATIVE_INFINITY,d=null,h=0,m=c.length;h<m;++h)c[h]>f&&(f=c[h],d=h);++s[d],c[d]=0,++l}return s[e]/a},e.MAX_SAFE_INTEGER=9007199254740991,e.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},e.isRadianAroundZero=function(t){return t>-1e-4&&t<1e-4},e.parseDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=i.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},e.quantity=function(t){return Math.pow(10,a(t))},e.quantityExponent=a,e.nice=function(t,e){var n=a(t),r=Math.pow(10,n),i=t/r;return t=(e?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10)*r,n>=-20?+t.toFixed(n<0?-n:0):t},e.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},e.reformIntervals=function(t){t.sort((function(t,e){return function t(e,n,r){return e.interval[r]<n.interval[r]||e.interval[r]===n.interval[r]&&(e.close[r]-n.close[r]==(r?-1:1)||!r&&t(e,n,1))}(t,e,0)?-1:1}));for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,a=t[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-n),e=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!=1?t.splice(r,1):r++}return t},e.isNumeric=function(t){return t-parseFloat(t)>=0}},function(t,e,n){var r=n(0),i=n(19),a=r.each,o=r.isObject,u=r.isArray;function s(t){return t instanceof Array?t:null==t?[]:[t]}function l(t){return o(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}var c=0;function f(t,e){return t&&t.hasOwnProperty(e)}e.normalizeToArray=s,e.defaultEmphasis=function(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}},e.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],e.getDataItemValue=function(t){return!o(t)||u(t)||t instanceof Date?t:t.value},e.isDataItemOption=function(t){return o(t)&&!(t instanceof Array)},e.mappingToExists=function(t,e){e=(e||[]).slice();var n=r.map(t||[],(function(t,e){return{exist:t}}));return a(e,(function(t,r){if(o(t)){for(var i=0;i<n.length;i++)if(!n[i].option&&null!=t.id&&n[i].exist.id===t.id+"")return n[i].option=t,void(e[r]=null);for(i=0;i<n.length;i++){var a=n[i].exist;if(!(n[i].option||null!=a.id&&null!=t.id||null==t.name||l(t)||l(a)||a.name!==t.name+""))return n[i].option=t,void(e[r]=null)}}})),a(e,(function(t,e){if(o(t)){for(var r=0;r<n.length;r++){var i=n[r].exist;if(!n[r].option&&!l(i)&&null==t.id){n[r].option=t;break}}r>=n.length&&n.push({option:t})}})),n},e.makeIdAndName=function(t){var e=r.createHashMap();a(t,(function(t,n){var r=t.exist;r&&e.set(r.id,t)})),a(t,(function(t,n){var i=t.option;r.assert(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})})),a(t,(function(t,n){var r=t.exist,i=t.option,a=t.keyInfo;if(o(i)){if(a.name=null!=i.name?i.name+"":r?r.name:"series\0"+n,r)a.id=r.id;else if(null!=i.id)a.id=i.id+"";else{var u=0;do{a.id="\0"+a.name+"\0"+u++}while(e.get(a.id))}e.set(a.id,t)}}))},e.isNameSpecified=function(t){var e=t.name;return!(!e||!e.indexOf("series\0"))},e.isIdInner=l,e.compressBatches=function(t,e){var n={},r={};return i(t||[],n),i(e||[],r,n),[a(n),a(r)];function i(t,e,n){for(var r=0,i=t.length;r<i;r++)for(var a=t[r].seriesId,o=s(t[r].dataIndex),u=n&&n[a],l=0,c=o.length;l<c;l++){var f=o[l];u&&u[f]?u[f]=null:(e[a]||(e[a]={}))[f]=1}}function a(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=t[r])if(e)n.push(+r);else{var i=a(t[r],!0);i.length&&n.push({seriesId:r,dataIndex:i})}return n}},e.queryDataIndex=function(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?r.isArray(e.dataIndex)?r.map(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?r.isArray(e.name)?r.map(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0},e.makeInner=function(){var t="__\0ec_inner_"+c+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}},e.parseFinder=function(t,e,n){if(r.isString(e)){var i={};i[e+"Index"]=0,e=i}var o=n&&n.defaultMainType;!o||f(e,o+"Index")||f(e,o+"Id")||f(e,o+"Name")||(e[o+"Index"]=0);var u={};return a(e,(function(i,a){i=e[a];if("dataIndex"!==a&&"dataIndexInside"!==a){var o=a.match(/^(\w+)(Index|Id|Name)$/)||[],s=o[1],l=(o[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&r.indexOf(n.includeMainTypes,s)<0)){var c={mainType:s};"index"===l&&"all"===i||(c[l]=i);var f=t.queryComponents(c);u[s+"Models"]=f,u[s+"Model"]=f[0]}}else u[a]=i})),u},e.setAttribute=function(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n},e.getAttribute=function(t,e){return t.getAttribute?t.getAttribute(e):t[e]},e.getTooltipRenderMode=function(t){return"auto"===t?i.domSupported?"html":"richText":t||"html"},e.groupData=function(t,e){var n=r.createHashMap(),i=[];return r.each(t,(function(t){var r=e(t);(n.get(r)||(i.push(r),n.set(r,[]))).push(t)})),{keys:i,buckets:n}}},function(t,e,n){var r=n(0),i=r.createHashMap,a=r.isTypedArray,o=n(22).enableClassCheck,u=n(7),s=u.SOURCE_FORMAT_ORIGINAL,l=u.SERIES_LAYOUT_BY_COLUMN,c=u.SOURCE_FORMAT_UNKNOWN,f=u.SOURCE_FORMAT_TYPED_ARRAY,d=u.SOURCE_FORMAT_KEYED_COLUMNS;function h(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===d?{}:[]),this.sourceFormat=t.sourceFormat||c,this.seriesLayoutBy=t.seriesLayoutBy||l,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&i(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}h.seriesDataToSource=function(t){return new h({data:t,sourceFormat:a(t)?f:s,fromDataset:!1})},o(h);var m=h;t.exports=m},function(t,e){e.SOURCE_FORMAT_ORIGINAL="original",e.SOURCE_FORMAT_ARRAY_ROWS="arrayRows",e.SOURCE_FORMAT_OBJECT_ROWS="objectRows",e.SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",e.SOURCE_FORMAT_UNKNOWN="unknown",e.SOURCE_FORMAT_TYPED_ARRAY="typedArray",e.SERIES_LAYOUT_BY_COLUMN="column",e.SERIES_LAYOUT_BY_ROW="row"},function(t,e,n){t.exports=n(9)},function(t,e,n){var r=n(1),i=n(10);n(17),n(25);var a=n(26);if(!a.isSupported)throw new Error("Sorry your browser not support wordCloud");r.registerLayout((function(t,e){t.eachSeriesByType("wordCloud",(function(n){var o=i.getLayoutRect(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),u=n.getData(),s=document.createElement("canvas");s.width=o.width,s.height=o.height;var l=s.getContext("2d"),c=n.get("maskImage");if(c)try{l.drawImage(c,0,0,s.width,s.height),function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),r=e.createImageData(n),i=0,a=0,o=0;o<n.data.length;o+=4){if(n.data[o+3]>128)i+=s=n.data[o]+n.data[o+1]+n.data[o+2],++a}var u=i/a;for(o=0;o<n.data.length;o+=4){var s=n.data[o]+n.data[o+1]+n.data[o+2];n.data[o+3]<128||s>u?(r.data[o]=0,r.data[o+1]=0,r.data[o+2]=0,r.data[o+3]=0):(r.data[o]=255,r.data[o+1]=255,r.data[o+2]=255,r.data[o+3]=255)}e.putImageData(r,0,0)}(s)}catch(t){console.error("Invalid mask image"),console.error(t.toString())}var f=n.get("sizeRange"),d=n.get("rotationRange"),h=u.getDataExtent("value"),m=Math.PI/180,p=n.get("gridSize");function g(t){var e=t.detail.item;t.detail.drawn&&n.layoutInstance.ondraw&&(t.detail.drawn.gx+=o.x/p,t.detail.drawn.gy+=o.y/p,n.layoutInstance.ondraw(e[0],e[1],e[2],t.detail.drawn))}a(s,{list:u.mapArray("value",(function(t,e){var n=u.getItemModel(e);return[u.getName(e),n.get("textStyle.normal.textSize",!0)||r.number.linearMap(t,h,f),e]})).sort((function(t,e){return e[1]-t[1]})),fontFamily:n.get("textStyle.normal.fontFamily")||n.get("textStyle.emphasis.fontFamily")||t.get("textStyle.fontFamily"),fontWeight:n.get("textStyle.normal.fontWeight")||n.get("textStyle.emphasis.fontWeight")||t.get("textStyle.fontWeight"),gridSize:p,ellipticity:o.height/o.width,minRotation:d[0]*m,maxRotation:d[1]*m,clearCanvas:!c,drawMask:n.get("drawMask"),maskColor:n.get("maskColor"),rotateRatio:1,rotationStep:n.get("rotationStep")*m,drawOutOfBound:n.get("drawOutOfBound"),shuffle:!1,shape:n.get("shape")}),s.addEventListener("wordclouddrawn",g),n.layoutInstance&&n.layoutInstance.dispose(),n.layoutInstance={ondraw:null,dispose:function(){s.removeEventListener("wordclouddrawn",g),s.addEventListener("wordclouddrawn",(function(t){t.preventDefault()}))}}}))})),r.registerPreprocessor((function(t){var e=(t||{}).series;!r.util.isArray(e)&&(e=e?[e]:[]);var n=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function i(t){t&&r.util.each(n,(function(e){t.hasOwnProperty(e)&&(t["text"+r.format.capitalFirst(e)]=t[e])}))}r.util.each(e,(function(t){if(t&&"wordCloud"===t.type){var e=t.textStyle||{};i(e.normal),i(e.emphasis)}}))}))},function(t,e,n){var r=n(0),i=n(3),a=n(4).parsePercent,o=n(13),u=r.each,s=["left","right","top","bottom","width","height"],l=[["width","left","right"],["height","top","bottom"]];function c(t,e,n,r,i){var a=0,o=0;null==r&&(r=1/0),null==i&&(i=1/0);var u=0;e.eachChild((function(s,l){var c,f,d=s.position,h=s.getBoundingRect(),m=e.childAt(l+1),p=m&&m.getBoundingRect();if("horizontal"===t){var g=h.width+(p?-p.x+h.x:0);(c=a+g)>r||s.newline?(a=0,c=g,o+=u+n,u=h.height):u=Math.max(u,h.height)}else{var v=h.height+(p?-p.y+h.y:0);(f=o+v)>i||s.newline?(a+=u+n,o=0,f=v,u=h.width):u=Math.max(u,h.width)}s.newline||(d[0]=a,d[1]=o,"horizontal"===t?a=c+n:o=f+n)}))}var f=c,d=r.curry(c,"vertical"),h=r.curry(c,"horizontal");function m(t,e,n){n=o.normalizeCssArray(n||0);var r=e.width,u=e.height,s=a(t.left,r),l=a(t.top,u),c=a(t.right,r),f=a(t.bottom,u),d=a(t.width,r),h=a(t.height,u),m=n[2]+n[0],p=n[1]+n[3],g=t.aspect;switch(isNaN(d)&&(d=r-c-p-s),isNaN(h)&&(h=u-f-m-l),null!=g&&(isNaN(d)&&isNaN(h)&&(g>r/u?d=.8*r:h=.8*u),isNaN(d)&&(d=g*h),isNaN(h)&&(h=d/g)),isNaN(s)&&(s=r-c-d-p),isNaN(l)&&(l=u-f-h-m),t.left||t.right){case"center":s=r/2-d/2-n[3];break;case"right":s=r-d-p}switch(t.top||t.bottom){case"middle":case"center":l=u/2-h/2-n[0];break;case"bottom":l=u-h-m}s=s||0,l=l||0,isNaN(d)&&(d=r-p-s-(c||0)),isNaN(h)&&(h=u-m-l-(f||0));var v=new i(s+n[3],l+n[0],d,h);return v.margin=n,v}function p(t,e){return e&&t&&u(s,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}e.LOCATION_PARAMS=s,e.HV_NAMES=l,e.box=f,e.vbox=d,e.hbox=h,e.getAvailableSize=function(t,e,n){var r=e.width,i=e.height,u=a(t.x,r),s=a(t.y,i),l=a(t.x2,r),c=a(t.y2,i);return(isNaN(u)||isNaN(parseFloat(t.x)))&&(u=0),(isNaN(l)||isNaN(parseFloat(t.x2)))&&(l=r),(isNaN(s)||isNaN(parseFloat(t.y)))&&(s=0),(isNaN(c)||isNaN(parseFloat(t.y2)))&&(c=i),n=o.normalizeCssArray(n||0),{width:Math.max(l-u-n[1]-n[3],0),height:Math.max(c-s-n[0]-n[2],0)}},e.getLayoutRect=m,e.positionElement=function(t,e,n,a,o){var u=!o||!o.hv||o.hv[0],s=!o||!o.hv||o.hv[1],l=o&&o.boundingMode||"all";if(u||s){var c;if("raw"===l)c="group"===t.type?new i(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(c=t.getBoundingRect(),t.needLocalTransform()){var f=t.getLocalTransform();(c=c.clone()).applyTransform(f)}e=m(r.defaults({width:c.width,height:c.height},e),n,a);var d=t.position,h=u?e.x-c.x:0,p=s?e.y-c.y:0;t.attr("position","raw"===l?[h,p]:[d[0]+h,d[1]+p])}},e.sizeCalculable=function(t,e){return null!=t[l[e][0]]||null!=t[l[e][1]]&&null!=t[l[e][2]]},e.mergeLayoutParam=function(t,e,n){!r.isObject(n)&&(n={});var i=n.ignoreSize;!r.isArray(i)&&(i=[i,i]);var a=s(l[0],0),o=s(l[1],1);function s(n,r){var a={},o=0,s={},l=0;if(u(n,(function(e){s[e]=t[e]})),u(n,(function(t){c(e,t)&&(a[t]=s[t]=e[t]),f(a,t)&&o++,f(s,t)&&l++})),i[r])return f(e,n[1])?s[n[2]]=null:f(e,n[2])&&(s[n[1]]=null),s;if(2!==l&&o){if(o>=2)return a;for(var d=0;d<n.length;d++){var h=n[d];if(!c(a,h)&&c(t,h)){a[h]=t[h];break}}return a}return s}function c(t,e){return t.hasOwnProperty(e)}function f(t,e){return null!=t[e]&&"auto"!==t[e]}function d(t,e,n){u(t,(function(t){e[t]=n[t]}))}d(l[0],t,a),d(l[1],t,o)},e.getLayoutParams=function(t){return p({},t)},e.copyLayoutParams=p},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array;function r(t){return Math.sqrt(a(t))}var i=r;function a(t){return t[0]*t[0]+t[1]*t[1]}var o=a;function u(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var s=u;function l(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var c=l;e.create=function(t,e){var r=new n(2);return null==t&&(t=0),null==e&&(e=0),r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.clone=function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},e.len=r,e.length=i,e.lenSquare=a,e.lengthSquare=o,e.mul=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},e.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.normalize=function(t,e){var n=r(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},e.distance=u,e.dist=s,e.distanceSquare=l,e.distSquare=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.lerp=function(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t},e.applyTransform=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array;function r(){var t=new n(6);return i(t),t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}e.create=r,e.identity=i,e.copy=a,e.mul=function(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],o=e[1]*n[2]+e[3]*n[3],u=e[0]*n[4]+e[2]*n[5]+e[4],s=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t},e.translate=function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},e.rotate=function(t,e,n){var r=e[0],i=e[2],a=e[4],o=e[1],u=e[3],s=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=-r*l+o*c,t[2]=i*c+u*l,t[3]=-i*l+c*u,t[4]=c*a+l*s,t[5]=c*s-l*a,t},e.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t},e.invert=function(t,e){var n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],u=e[5],s=n*o-a*r;return s?(s=1/s,t[0]=o*s,t[1]=-a*s,t[2]=-r*s,t[3]=n*s,t[4]=(r*u-o*i)*s,t[5]=(a*i-n*u)*s,t):null},e.clone=function(t){var e=r();return a(e,t),e}},function(t,e,n){var r=n(0),i=n(14),a=n(4);var o=r.normalizeCssArray,u=/([&<>"'])/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function l(t){return null==t?"":(t+"").replace(u,(function(t,e){return s[e]}))}var c=["a","b","c","d","e","f","g"],f=function(t,e){return"{"+t+(null==e?"":e)+"}"};function d(t,e){return"0000".substr(0,e-(t+="").length)+t}var h=i.truncateText;e.addCommas=function(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")},e.toCamelCase=function(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},e.normalizeCssArray=o,e.encodeHTML=l,e.formatTpl=function(t,e,n){r.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var a=e[0].$vars||[],o=0;o<a.length;o++){var u=c[o];t=t.replace(f(u),f(u,0))}for(var s=0;s<i;s++)for(var d=0;d<a.length;d++){var h=e[s][a[d]];t=t.replace(f(c[d],s),n?l(h):h)}return t},e.formatTplSimple=function(t,e,n){return r.each(e,(function(e,r){t=t.replace("{"+r+"}",n?l(e):e)})),t},e.getTooltipMarker=function(t,e){var n=(t=r.isString(t)?{color:t,extraCssText:e}:t||{}).color,i=t.type,a=(e=t.extraCssText,t.renderMode||"html"),o=t.markerId||"X";return n?"html"===a?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+l(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+l(n)+";"+(e||"")+'"></span>':{renderMode:a,content:"{marker"+o+"|}  ",style:{color:n}}:""},e.formatTime=function(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var r=a.parseDate(e),i=n?"UTC":"",o=r["get"+i+"FullYear"](),u=r["get"+i+"Month"]()+1,s=r["get"+i+"Date"](),l=r["get"+i+"Hours"](),c=r["get"+i+"Minutes"](),f=r["get"+i+"Seconds"](),h=r["get"+i+"Milliseconds"]();return t=t.replace("MM",d(u,2)).replace("M",u).replace("yyyy",o).replace("yy",o%100).replace("dd",d(s,2)).replace("d",s).replace("hh",d(l,2)).replace("h",l).replace("mm",d(c,2)).replace("m",c).replace("ss",d(f,2)).replace("s",f).replace("SSS",d(h,3))},e.capitalFirst=function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},e.truncateText=h,e.getTextBoundingRect=function(t){return i.getBoundingRect(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},e.getTextRect=function(t,e,n,r,a,o,u,s){return i.getBoundingRect(t,e,n,r,a,s,o,u)},e.windowOpen=function(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}},function(t,e,n){var r=n(3),i=n(15),a=n(0),o=a.getContext,u=a.extend,s=a.retrieve2,l=a.retrieve3,c=a.trim,f={},d=0,h=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,m={};function p(t,e){var n=t+":"+(e=e||"12px sans-serif");if(f[n])return f[n];for(var r=(t+"").split("\n"),i=0,a=0,o=r.length;a<o;a++)i=Math.max(C(r[a],e).width,i);return d>5e3&&(d=0,f={}),d++,f[n]=i,i}function g(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function v(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function y(t,e,n){var r=e.textPosition,i=e.textDistance,a=n.x,o=n.y;i=i||0;var u=n.height,s=n.width,l=u/2,c="left",f="top";switch(r){case"left":a-=i,o+=l,c="right",f="middle";break;case"right":a+=i+s,o+=l,f="middle";break;case"top":a+=s/2,o-=i,c="center",f="bottom";break;case"bottom":a+=s/2,o+=u+i,c="center";break;case"inside":a+=s/2,o+=l,c="center",f="middle";break;case"insideLeft":a+=i,o+=l,f="middle";break;case"insideRight":a+=s-i,o+=l,c="right",f="middle";break;case"insideTop":a+=s/2,o+=i,c="center";break;case"insideBottom":a+=s/2,o+=u-i,c="center",f="bottom";break;case"insideTopLeft":a+=i,o+=i;break;case"insideTopRight":a+=s-i,o+=i,c="right";break;case"insideBottomLeft":a+=i,o+=u-i,f="bottom";break;case"insideBottomRight":a+=s-i,o+=u-i,c="right",f="bottom"}return(t=t||{}).x=a,t.y=o,t.textAlign=c,t.textVerticalAlign=f,t}function x(t,e,n,r,i){if(!e)return"";var a=(t+"").split("\n");i=w(e,n,r,i);for(var o=0,u=a.length;o<u;o++)a[o]=M(a[o],i);return a.join("\n")}function w(t,e,n,r){(r=u({},r)).font=e;n=s(n,"...");r.maxIterations=s(r.maxIterations,2);var i=r.minChar=s(r.minChar,0);r.cnCharWidth=p("国",e);var a=r.ascCharWidth=p("a",e);r.placeholder=s(r.placeholder,"");for(var o=t=Math.max(0,t-1),l=0;l<i&&o>=a;l++)o-=a;var c=p(n,e);return c>o&&(n="",c=0),o=t-c,r.ellipsis=n,r.ellipsisWidth=c,r.contentWidth=o,r.containerWidth=t,r}function M(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var a=p(t,r);if(a<=n)return t;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){t+=e.ellipsis;break}var u=0===o?b(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;a=p(t=t.substr(0,u),r)}return""===t&&(t=e.placeholder),t}function b(t,e,n,r){for(var i=0,a=0,o=t.length;a<o&&i<e;a++){var u=t.charCodeAt(a);i+=0<=u&&u<=127?n:r}return a}function S(t){return p("国",t)}function C(t,e){return m.measureText(t,e)}function I(t,e,n,r,i){null!=t&&(t+="");var a=s(r,S(e)),o=t?t.split("\n"):[],u=o.length*a,l=u,c=!0;if(n&&(l+=n[0]+n[2]),t&&i){c=!1;var f=i.outerHeight,d=i.outerWidth;if(null!=f&&l>f)t="",o=[];else if(null!=d)for(var h=w(d-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),m=0,p=o.length;m<p;m++)o[m]=M(o[m],h)}return{lines:o,height:u,outerHeight:l,lineHeight:a,canCacheByTextString:c}}function _(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var r,a=h.lastIndex=0;null!=(r=h.exec(t));){var o=r.index;o>a&&O(n,t.substring(a,o)),O(n,r[2],r[1]),a=h.lastIndex}a<t.length&&O(n,t.substring(a,t.length));var u=n.lines,c=0,f=0,d=[],m=e.textPadding,g=e.truncate,v=g&&g.outerWidth,y=g&&g.outerHeight;m&&(null!=v&&(v-=m[1]+m[3]),null!=y&&(y-=m[0]+m[2]));for(var w=0;w<u.length;w++){for(var M=u[w],b=0,C=0,I=0;I<M.tokens.length;I++){var _=(L=M.tokens[I]).styleName&&e.rich[L.styleName]||{},T=L.textPadding=_.textPadding,A=L.font=_.font||e.font,E=L.textHeight=s(_.textHeight,S(A));if(T&&(E+=T[0]+T[2]),L.height=E,L.lineHeight=l(_.textLineHeight,e.textLineHeight,E),L.textAlign=_&&_.textAlign||e.textAlign,L.textVerticalAlign=_&&_.textVerticalAlign||"middle",null!=y&&c+L.lineHeight>y)return{lines:[],width:0,height:0};L.textWidth=p(L.text,A);var N=_.textWidth,D=null==N||"auto"===N;if("string"==typeof N&&"%"===N.charAt(N.length-1))L.percentWidth=N,d.push(L),N=0;else{if(D){N=L.textWidth;var R=_.textBackgroundColor,k=R&&R.image;k&&(k=i.findExistImage(k),i.isImageReady(k)&&(N=Math.max(N,k.width*E/k.height)))}var F=T?T[1]+T[3]:0;N+=F;var P=null!=v?v-C:null;null!=P&&P<N&&(!D||P<F?(L.text="",L.textWidth=N=0):(L.text=x(L.text,P-F,A,g.ellipsis,{minChar:g.minChar}),L.textWidth=p(L.text,A),N=L.textWidth+F))}C+=L.width=N,_&&(b=Math.max(b,L.lineHeight))}M.width=C,M.lineHeight=b,c+=b,f=Math.max(f,C)}n.outerWidth=n.width=s(e.textWidth,f),n.outerHeight=n.height=s(e.textHeight,c),m&&(n.outerWidth+=m[1]+m[3],n.outerHeight+=m[0]+m[2]);for(w=0;w<d.length;w++){var L,W=(L=d[w]).percentWidth;L.width=parseInt(W,10)/100*f}return n}function O(t,e,n){for(var r=""===e,i=e.split("\n"),a=t.lines,o=0;o<i.length;o++){var u=i[o],s={styleName:n,text:u,isLineHolder:!u&&!r};if(o)a.push({tokens:[s]});else{var l=(a[a.length-1]||(a[0]={tokens:[]})).tokens,c=l.length;1===c&&l[0].isLineHolder?l[0]=s:(u||!c||r)&&l.push(s)}}}m.measureText=function(t,e){var n=o();return n.font=e||"12px sans-serif",n.measureText(t)},e.DEFAULT_FONT="12px sans-serif",e.$override=function(t,e){m[t]=e},e.getWidth=p,e.getBoundingRect=function(t,e,n,i,a,o,u,s){return u?function(t,e,n,i,a,o,u,s){var l=_(t,{rich:u,truncate:s,font:e,textAlign:n,textPadding:a,textLineHeight:o}),c=l.outerWidth,f=l.outerHeight,d=g(0,c,n),h=v(0,f,i);return new r(d,h,c,f)}(t,e,n,i,a,o,u,s):function(t,e,n,i,a,o,u){var s=I(t,e,a,o,u),l=p(t,e);a&&(l+=a[1]+a[3]);var c=s.outerHeight,f=g(0,l,n),d=v(0,c,i),h=new r(f,d,l,c);return h.lineHeight=s.lineHeight,h}(t,e,n,i,a,o,s)},e.adjustTextX=g,e.adjustTextY=v,e.calculateTextPosition=y,e.adjustTextPositionOnRect=function(t,e,n){return y({},{textPosition:t,textDistance:n},e)},e.truncateText=x,e.getLineHeight=S,e.measureText=C,e.parsePlainText=I,e.parseRichText=_,e.makeFont=function(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&c(e)||t.textFont||t.font}},function(t,e,n){var r=new(n(16))(50);function i(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function a(t){return t&&t.width&&t.height}e.findExistImage=function(t){if("string"==typeof t){var e=r.get(t);return e&&e.image}return t},e.createOrUpdateImage=function(t,e,n,o,u){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var s=r.get(t),l={hostEl:n,cb:o,cbPayload:u};return s?!a(e=s.image)&&s.pending.push(l):((e=new Image).onload=e.onerror=i,r.put(t,e.__cachedImgObj={image:e,pending:[l]}),e.src=e.__zrImageSrc=t),e}return t}return e},e.isImageReady=a},function(t,e){var n=function(){this.head=null,this.tail=null,this._len=0},r=n.prototype;r.insert=function(t){var e=new i(t);return this.insertEntry(e),e},r.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},r.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},r.len=function(){return this._len},r.clear=function(){this.head=this.tail=null,this._len=0};var i=function(t){this.value=t,this.next,this.prev},a=function(t){this._list=new n,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},o=a.prototype;o.put=function(t,e){var n=this._list,r=this._map,a=null;if(null==r[t]){var o=n.len(),u=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=n.head;n.remove(s),delete r[s.key],a=s.value,this._lastRemovedEntry=s}u?u.value=e:u=new i(e),u.key=t,n.insertEntry(u),r[t]=u}return a},o.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},o.clear=function(){this._list.clear(),this._map={}};var u=a;t.exports=u},function(t,e,n){var r=n(18),i=n(1);i.extendSeriesModel({type:"series.wordCloud",visualColorAccessPath:"textStyle.normal.color",optionUpdated:function(){var t=this.option;t.gridSize=Math.max(Math.floor(t.gridSize),4)},getInitialData:function(t,e){var n=r(["value"],t.data),a=new i.List(n,this);return a.initData(t.data),a},defaultOption:{maskImage:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",shape:"circle",left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,textStyle:{normal:{fontWeight:"normal"}}}})},function(t,e,n){var r=n(0),i=r.createHashMap,a=r.each,o=r.isString,u=r.defaults,s=r.extend,l=r.isObject,c=r.clone,f=n(5).normalizeToArray,d=n(20),h=d.guessOrdinal,m=d.BE_ORDINAL,p=n(6),g=n(23).OTHER_DIMENSIONS,v=n(24);function y(t,e,n){if(n||null!=e.get(t)){for(var r=0;null!=e.get(t+r);)r++;t+=r}return e.set(t,!0),t}var x=function(t,e,n){p.isInstance(e)||(e=p.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var r=(n.dimsDef||[]).slice(),d=i(),x=i(),w=[],M=function(t,e,n,r){var i=Math.max(t.dimensionsDetectCount||1,e.length,n.length,r||0);return a(e,(function(t){var e=t.dimsDef;e&&(i=Math.max(i,e.length))})),i}(e,t,r,n.dimCount),b=0;b<M;b++){var S=r[b]=s({},l(r[b])?r[b]:{name:r[b]}),C=S.name,I=w[b]=new v;null!=C&&null==d.get(C)&&(I.name=I.displayName=C,d.set(C,b)),null!=S.type&&(I.type=S.type),null!=S.displayName&&(I.displayName=S.displayName)}var _=n.encodeDef;!_&&n.encodeDefaulter&&(_=n.encodeDefaulter(e,M)),(_=i(_)).each((function(t,e){if(1===(t=f(t).slice()).length&&!o(t[0])&&t[0]<0)_.set(e,!1);else{var n=_.set(e,[]);a(t,(function(t,r){o(t)&&(t=d.get(t)),null!=t&&t<M&&(n[r]=t,T(w[t],e,r))}))}}));var O=0;function T(t,e,n){null!=g.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,x.set(e,!0))}a(t,(function(t,e){var n,r,i;if(o(t))n=t,t={};else{n=t.name;var s=t.ordinalMeta;t.ordinalMeta=null,(t=c(t)).ordinalMeta=s,r=t.dimsDef,i=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}if(!1!==(d=_.get(n))){var d;if(!(d=f(d)).length)for(var h=0;h<(r&&r.length||1);h++){for(;O<w.length&&null!=w[O].coordDim;)O++;O<w.length&&d.push(O++)}a(d,(function(e,a){var o=w[e];if(T(u(o,t),n,a),null==o.name&&r){var s=r[a];!l(s)&&(s={name:s}),o.name=o.displayName=s.name,o.defaultTooltip=s.defaultTooltip}i&&u(o.otherDims,i)}))}}));var A=n.generateCoord,E=n.generateCoordCount,N=null!=E;E=A?E||1:0;for(var D=A||"value",R=0;R<M;R++){null==(I=w[R]=w[R]||new v).coordDim&&(I.coordDim=y(D,x,N),I.coordDimIndex=0,(!A||E<=0)&&(I.isExtraCoord=!0),E--),null==I.name&&(I.name=y(I.coordDim,d)),null!=I.type||h(e,R,I.name)!==m.Must&&(!I.isExtraCoord||null==I.otherDims.itemName&&null==I.otherDims.seriesName)||(I.type="ordinal")}return w};t.exports=x},function(t,e){var n="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),i=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);n&&(e.firefox=!0,e.version=n[1]);r&&(e.ie=!0,e.version=r[1]);i&&(e.edge=!0,e.version=i[1]);a&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&e.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent);t.exports=n},function(t,e,n){n(2).__DEV__;var r=n(5),i=r.makeInner,a=r.getDataItemValue,o=n(0),u=o.createHashMap,s=o.each,l=o.map,c=o.isArray,f=o.isString,d=o.isObject,h=o.isTypedArray,m=o.isArrayLike,p=o.extend,g=(o.assert,n(6)),v=n(7),y=v.SOURCE_FORMAT_ORIGINAL,x=v.SOURCE_FORMAT_ARRAY_ROWS,w=v.SOURCE_FORMAT_OBJECT_ROWS,M=v.SOURCE_FORMAT_KEYED_COLUMNS,b=v.SOURCE_FORMAT_UNKNOWN,S=v.SOURCE_FORMAT_TYPED_ARRAY,C=v.SERIES_LAYOUT_BY_ROW,I={Must:1,Might:2,Not:3},_=i();function O(t){if(t){var e=u();return l(t,(function(t,n){if(null==(t=p({},d(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var r=e.get(t.name);return r?t.name+="-"+r.count++:e.set(t.name,{count:1}),t}))}}function T(t,e,n,r){if(null==r&&(r=1/0),e===C)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else{var a=n[0]||[];for(i=0;i<a.length&&i<r;i++)t(a[i],i)}}function A(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function E(t,e,n,r,i,o){var u,s,l;if(h(t))return I.Not;if(r){var m=r[o];d(m)?(s=m.name,l=m.type):f(m)&&(s=m)}if(null!=l)return"ordinal"===l?I.Must:I.Not;if(e===x)if(n===C){for(var p=t[o],g=0;g<(p||[]).length&&g<5;g++)if(null!=(u=_(p[i+g])))return u}else for(g=0;g<t.length&&g<5;g++){var v=t[i+g];if(v&&null!=(u=_(v[o])))return u}else if(e===w){if(!s)return I.Not;for(g=0;g<t.length&&g<5;g++){if((b=t[g])&&null!=(u=_(b[s])))return u}}else if(e===M){if(!s)return I.Not;if(!(p=t[s])||h(p))return I.Not;for(g=0;g<p.length&&g<5;g++)if(null!=(u=_(p[g])))return u}else if(e===y)for(g=0;g<t.length&&g<5;g++){var b=t[g],S=a(b);if(!c(S))return I.Not;if(null!=(u=_(S[o])))return u}function _(t){var e=f(t);return null!=t&&isFinite(t)&&""!==t?e?I.Might:I.Not:e&&"-"!==t?I.Must:void 0}return I.Not}e.BE_ORDINAL=I,e.detectSourceFormat=function(t){var e=t.option.source,n=b;if(h(e))n=S;else if(c(e)){0===e.length&&(n=x);for(var r=0,i=e.length;r<i;r++){var a=e[r];if(null!=a){if(c(a)){n=x;break}if(d(a)){n=w;break}}}}else if(d(e)){for(var o in e)if(e.hasOwnProperty(o)&&m(e[o])){n=M;break}}else if(null!=e)throw new Error("Invalid data");_(t).sourceFormat=n},e.getSource=function(t){return _(t).source},e.resetSourceDefaulter=function(t){_(t).datasetMap=u()},e.prepareSource=function(t){var e=t.option,n=e.data,r=h(n)?S:y,i=!1,o=e.seriesLayoutBy,u=e.sourceHeader,l=e.dimensions,d=A(t);if(d){var m=d.option;n=m.source,r=_(d).sourceFormat,i=!0,o=o||m.seriesLayoutBy,null==u&&(u=m.sourceHeader),l=l||m.dimensions}var p=function(t,e,n,r,i){if(!t)return{dimensionsDefine:O(i)};var o,u;if(e===x)"auto"===r||null==r?T((function(t){null!=t&&"-"!==t&&(f(t)?null==u&&(u=1):u=0)}),n,t,10):u=r?1:0,i||1!==u||(i=[],T((function(t,e){i[e]=null!=t?t:""}),n,t)),o=i?i.length:n===C?t.length:t[0]?t[0].length:null;else if(e===w)i||(i=function(t){var e,n=0;for(;n<t.length&&!(e=t[n++]););if(e){var r=[];return s(e,(function(t,e){r.push(e)})),r}}(t));else if(e===M)i||(i=[],s(t,(function(t,e){i.push(e)})));else if(e===y){var l=a(t[0]);o=c(l)&&l.length||1}return{startIndex:u,dimensionsDefine:O(i),dimensionsDetectCount:o}}(n,r,o,u,l);_(t).source=new g({data:n,fromDataset:i,seriesLayoutBy:o,sourceFormat:r,dimensionsDefine:p.dimensionsDefine,startIndex:p.startIndex,dimensionsDetectCount:p.dimensionsDetectCount,encodeDefine:e.encode})},e.makeSeriesEncodeForAxisCoordSys=function(t,e,n){var r={},i=A(e);if(!i||!t)return r;var a,o,u=[],l=[],c=e.ecModel,f=_(c).datasetMap,h=i.uid+"_"+n.seriesLayoutBy;t=t.slice(),s(t,(function(e,n){!d(e)&&(t[n]={name:e}),"ordinal"===e.type&&null==a&&(a=n,o=g(t[n])),r[e.name]=[]}));var m=f.get(h)||f.set(h,{categoryWayDim:o,valueWayDim:0});function p(t,e,n){for(var r=0;r<n;r++)t.push(e+r)}function g(t){var e=t.dimsDef;return e?e.length:1}return s(t,(function(t,e){var n=t.name,i=g(t);if(null==a){var o=m.valueWayDim;p(r[n],o,i),p(l,o,i),m.valueWayDim+=i}else if(a===e)p(r[n],0,i),p(u,0,i);else{o=m.categoryWayDim;p(r[n],o,i),p(l,o,i),m.categoryWayDim+=i}})),u.length&&(r.itemName=u),l.length&&(r.seriesName=l),r},e.makeSeriesEncodeForNameBased=function(t,e,n){var r={};if(!A(t))return r;var i,a=e.sourceFormat,o=e.dimensionsDefine;a!==w&&a!==M||s(o,(function(t,e){"name"===(d(t)?t.name:t)&&(i=e)}));var u=function(){for(var t={},r={},u=[],s=0,l=Math.min(5,n);s<l;s++){var c=E(e.data,a,e.seriesLayoutBy,o,e.startIndex,s);u.push(c);var f=c===I.Not;if(f&&null==t.v&&s!==i&&(t.v=s),(null==t.n||t.n===t.v||!f&&u[t.n]===I.Not)&&(t.n=s),d(t)&&u[t.n]!==I.Not)return t;f||(c===I.Might&&null==r.v&&s!==i&&(r.v=s),null!=r.n&&r.n!==r.v||(r.n=s))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(r)?r:null}();if(u){r.value=u.v;var l=null!=i?i:u.n;r.itemName=[l],r.seriesName=[l]}return r},e.guessOrdinal=function(t,e){return E(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){n(2).__DEV__;var r=n(0),i="___EC__COMPONENT__CONTAINER___";function a(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e}var o=0;function u(t,e){var n=r.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)}function s(t,e,n){return this.superClass.prototype[e].apply(t,n)}e.parseClassType=a,e.enableClassExtend=function(t,e){t.$constructor=t,t.extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return r.extend(n.prototype,t),n.extend=this.extend,n.superCall=u,n.superApply=s,r.inherits(n,this),n.superClass=e,n}},e.enableClassCheck=function(t){var e=["__\0is_clz",o++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}},e.enableClassManagement=function(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){if(e)if(function(t){r.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=a(e)).sub){if(e.sub!==i){(function(t){var e=n[t.main];e&&e[i]||((e=n[t.main]={})[i]=!0);return e}(e))[e.sub]=t}}else n[e.main]=t;return t},t.getClass=function(t,e,r){var a=n[t];if(a&&a[i]&&(a=e?a[e]:null),r&&!a)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return a},t.getClassesByMainType=function(t){t=a(t);var e=[],o=n[t.main];return o&&o[i]?r.each(o,(function(t,n){n!==i&&e.push(t)})):e.push(o),e},t.hasClass=function(t){return t=a(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return r.each(n,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){t=a(t);var e=n[t.main];return e&&e[i]},t.parseClassType=a,e.registerWhenExtend){var o=t.extend;o&&(t.extend=function(e){var n=o.call(this,e);return t.registerClass(n,e.type)})}return t},e.setReadOnly=function(t,e){}},function(t,e,n){var r=n(0),i=r.each,a=r.createHashMap,o=(r.assert,n(2).__DEV__,a(["tooltip","label","itemName","itemId","seriesName"]));function u(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}e.OTHER_DIMENSIONS=o,e.summarizeDimensions=function(t){var e={},n=e.encode={},r=a(),s=[],l=[],c=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};i(t.dimensions,(function(e){var i,a=t.getDimensionInfo(e),f=a.coordDim;if(f){var d=a.coordDimIndex;u(n,f)[d]=e,a.isExtraCoord||(r.set(f,1),"ordinal"!==(i=a.type)&&"time"!==i&&(s[0]=e),u(c.encode,f)[d]=a.index),a.defaultTooltip&&l.push(e)}o.each((function(t,e){var r=u(n,e),i=a.otherDims[e];null!=i&&!1!==i&&(r[i]=a.name)}))}));var f=[],d={};r.each((function(t,e){var r=n[e];d[e]=r[0],f=f.concat(r)})),e.dataDimsOnCoord=f,e.encodeFirstDimNotExtra=d;var h=n.label;h&&h.length&&(s=h.slice());var m=n.tooltip;return m&&m.length?l=m.slice():l.length||(l=s.slice()),n.defaultedLabel=s,n.defaultedTooltip=l,e},e.getDimensionTypeByAxis=function(t){return"category"===t?"ordinal":"time"===t?"time":"float"}},function(t,e,n){var r=n(0);var i=function(t){null!=t&&r.extend(this,t),this.otherDims={}};t.exports=i},function(t,e,n){var r=n(1);r.extendChartView({type:"wordCloud",render:function(t,e,n){var i=this.group;i.removeAll();var a=t.getData(),o=t.get("gridSize");t.layoutInstance.ondraw=function(t,e,n,u){var s=a.getItemModel(n),l=s.getModel("textStyle.normal"),c=s.getModel("textStyle.emphasis"),f=new r.graphic.Text({style:r.graphic.setTextStyle({},l,{x:u.info.fillTextOffsetX,y:u.info.fillTextOffsetY+.5*e,text:t,textBaseline:"middle",textFill:a.getItemVisual(n,"color"),fontSize:e}),scale:[1/u.info.mu,1/u.info.mu],position:[(u.gx+u.info.gw/2)*o,(u.gy+u.info.gh/2)*o],rotation:u.rot});i.add(f),a.setItemGraphicEl(n,f),r.graphic.setHoverStyle(f,r.graphic.setTextStyle({},c,null,{forMerge:!0},!0))},this._model=t},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}})},function(t,e,n){"use strict";var r,i,a,o,u;
/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message";return window.addEventListener("message",(function(n){if("string"==typeof n.data&&n.data.substr(0,e.length)===e){n.stopImmediatePropagation();var r=parseInt(n.data.substr(e.length),36);t[r]&&(t[r](),t[r]=void 0)}}),!0),window.clearImmediate=function(e){t[e]&&(t[e]=void 0)},function(n){var r=t.length;return t.push(n),window.postMessage(e+r.toString(36),"*"),r}}()||function(t){window.setTimeout(t,0)}),window.clearImmediate||(window.clearImmediate=window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}),i=function(){var t=document.createElement("canvas");if(!t||!t.getContext)return!1;var e=t.getContext("2d");return!!(e.getImageData&&e.fillText&&Array.prototype.some&&Array.prototype.push)}(),a=function(){if(i){for(var t,e,n=document.createElement("canvas").getContext("2d"),r=20;r;){if(n.font=r.toString(10)+"px sans-serif",n.measureText("Ｗ").width===t&&n.measureText("m").width===e)return r+1;t=n.measureText("Ｗ").width,e=n.measureText("m").width,r--}return 0}}(),o=function(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t},(u=function(t,e){if(i){Array.isArray(t)||(t=[t]),t.forEach((function(e,n){if("string"==typeof e){if(t[n]=document.getElementById(e),!t[n])throw"The element id specified is not found."}else if(!e.tagName&&!e.appendChild)throw"You must pass valid HTML elements, or ID of the element."}));var n={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(e)for(var r in e)r in n&&(n[r]=e[r]);if("function"!=typeof n.weightFactor){var u=n.weightFactor;n.weightFactor=function(t){return t*u}}if("function"!=typeof n.shape)switch(n.shape){case"circle":default:n.shape="circle";break;case"cardioid":n.shape=function(t){return 1-Math.sin(t)};break;case"diamond":case"square":n.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"triangle-forward":n.shape=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle":case"triangle-upright":n.shape=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":n.shape=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":n.shape=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}n.gridSize=Math.max(Math.floor(n.gridSize),4);var s,l,c,f,d,h,m,p=n.gridSize,g=p-n.maskGapWidth,v=Math.abs(n.maxRotation-n.minRotation),y=Math.min(n.maxRotation,n.minRotation),x=n.rotationStep;switch(n.color){case"random-dark":m=function(){return R(10,50)};break;case"random-light":m=function(){return R(50,90)};break;default:"function"==typeof n.color&&(m=n.color)}var w=null;"function"==typeof n.classes&&(w=n.classes);var M,b=!1,S=[],C=function(t){var e,n,r=t.currentTarget,i=r.getBoundingClientRect();t.touches?(e=t.touches[0].clientX,n=t.touches[0].clientY):(e=t.clientX,n=t.clientY);var a=e-i.left,o=n-i.top,u=Math.floor(a*(r.width/i.width||1)/p),s=Math.floor(o*(r.height/i.height||1)/p);return S[u][s]},I=function(t){var e=C(t);M!==e&&(M=e,e?n.hover(e.item,e.dimension,t):n.hover(void 0,void 0,t))},_=function(t){var e=C(t);e&&(n.click(e.item,e.dimension,t),t.preventDefault())},O=[],T=function(t){if(O[t])return O[t];var e=8*t,r=e,i=[];for(0===t&&i.push([f[0],f[1],0]);r--;){var a=1;"circle"!==n.shape&&(a=n.shape(r/e*2*Math.PI)),i.push([f[0]+t*a*Math.cos(-r/e*2*Math.PI),f[1]+t*a*Math.sin(-r/e*2*Math.PI)*n.ellipticity,r/e*2*Math.PI])}return O[t]=i,i},A=function(){return n.abortThreshold>0&&(new Date).getTime()-h>n.abortThreshold},E=function(e,n,r,i,a){e>=l||n>=c||e<0||n<0||(s[e][n]=!1,r&&t[0].getContext("2d").fillRect(e*p,n*p,g,g),b&&(S[e][n]={item:a,dimension:i}))},N=function(e){var r,i,u;Array.isArray(e)?(r=e[0],i=e[1]):(r=e.word,i=e.weight,u=e.attributes);var f=0===n.rotateRatio||Math.random()>n.rotateRatio?0:0===v?y:y+Math.round(Math.random()*v/x)*x,h=function(t,e,r){var i=n.weightFactor(e);if(i<=n.minSize)return!1;var o=1;i<a&&(o=function(){for(var t=2;t*i<a;)t+=2;return t}());var u=document.createElement("canvas"),s=u.getContext("2d",{willReadFrequently:!0});s.font=n.fontWeight+" "+(i*o).toString(10)+"px "+n.fontFamily;var l=s.measureText(t).width/o,c=Math.max(i*o,s.measureText("m").width,s.measureText("Ｗ").width)/o,f=l+2*c,d=3*c,h=Math.ceil(f/p),m=Math.ceil(d/p);f=h*p,d=m*p;var g=-l/2,v=.4*-c,y=Math.ceil((f*Math.abs(Math.sin(r))+d*Math.abs(Math.cos(r)))/p),x=Math.ceil((f*Math.abs(Math.cos(r))+d*Math.abs(Math.sin(r)))/p),w=x*p,M=y*p;u.setAttribute("width",w),u.setAttribute("height",M),s.scale(1/o,1/o),s.translate(w*o/2,M*o/2),s.rotate(-r),s.font=n.fontWeight+" "+(i*o).toString(10)+"px "+n.fontFamily,s.fillStyle="#000",s.textBaseline="middle",s.fillText(t,g*o,(v+.5*i)*o);var b=s.getImageData(0,0,w,M).data;if(A())return!1;for(var S,C,I,_=[],O=x,T=[y/2,x/2,y/2,x/2];O--;)for(S=y;S--;){I=p;t:for(;I--;)for(C=p;C--;)if(b[4*((S*p+I)*w+(O*p+C))+3]){_.push([O,S]),O<T[3]&&(T[3]=O),O>T[1]&&(T[1]=O),S<T[0]&&(T[0]=S),S>T[2]&&(T[2]=S);break t}}return{mu:o,occupied:_,bounds:T,gw:x,gh:y,fillTextOffsetX:g,fillTextOffsetY:v,fillTextWidth:l,fillTextHeight:c,fontSize:i}}(r,i,f);if(!h)return!1;if(A())return!1;if(!n.drawOutOfBound){var g=h.bounds;if(g[1]-g[3]+1>l||g[2]-g[0]+1>c)return!1}for(var M=d+1,S=function(a){var o=Math.floor(a[0]-h.gw/2),g=Math.floor(a[1]-h.gh/2);return h.gw,h.gh,!!function(t,e,r,i,a){for(var o=a.length;o--;){var u=t+a[o][0],f=e+a[o][1];if(u>=l||f>=c||u<0||f<0){if(!n.drawOutOfBound)return!1}else if(!s[u][f])return!1}return!0}(o,g,0,0,h.occupied)&&(function(e,r,i,a,o,u,s,l,c){var f,d,h=i.fontSize;f=m?m(a,o,h,u,s):n.color,d=w?w(a,o,h,u,s):n.classes;var g=i.bounds;g[3],g[0],g[1],g[3],g[2],g[0],t.forEach((function(t){if(t.getContext){var o=t.getContext("2d"),u=i.mu;o.save(),o.scale(1/u,1/u),o.font=n.fontWeight+" "+(h*u).toString(10)+"px "+n.fontFamily,o.fillStyle=f,o.translate((e+i.gw/2)*p*u,(r+i.gh/2)*p*u),0!==l&&o.rotate(-l),o.textBaseline="middle",o.fillText(a,i.fillTextOffsetX*u,(i.fillTextOffsetY+.5*h)*u),o.restore()}else{var s=document.createElement("span"),m="";m="rotate("+-l/Math.PI*180+"deg) ",1!==i.mu&&(m+="translateX(-"+i.fillTextWidth/4+"px) scale("+1/i.mu+")");var g={position:"absolute",display:"block",font:n.fontWeight+" "+h*i.mu+"px "+n.fontFamily,left:(e+i.gw/2)*p+i.fillTextOffsetX+"px",top:(r+i.gh/2)*p+i.fillTextOffsetY+"px",width:i.fillTextWidth+"px",height:i.fillTextHeight+"px",lineHeight:h+"px",whiteSpace:"nowrap",transform:m,webkitTransform:m,msTransform:m,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};for(var v in f&&(g.color=f),s.textContent=a,g)s.style[v]=g[v];if(c)for(var y in c)s.setAttribute(y,c[y]);d&&(s.className+=d),t.appendChild(s)}}))}(o,g,h,r,i,d-M,a[2],f,u),function(e,r,i,a,o,u){var s,f,d=o.occupied,h=n.drawMask;if(h&&((s=t[0].getContext("2d")).save(),s.fillStyle=n.maskColor),b){var m=o.bounds;f={x:(e+m[3])*p,y:(r+m[0])*p,w:(m[1]-m[3]+1)*p,h:(m[2]-m[0]+1)*p}}for(var g=d.length;g--;){var v=e+d[g][0],y=r+d[g][1];v>=l||y>=c||v<0||y<0||E(v,y,h,f,u)}h&&s.restore()}(o,g,0,0,h,e),{gx:o,gy:g,rot:f,info:h})};M--;){var C=T(d-M);n.shuffle&&(C=[].concat(C),o(C));for(var I=0;I<C.length;I++){var _=S(C[I]);if(_)return _}}return null},D=function(e,n,r){if(n)return!t.some((function(t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,n,r||{}),!t.dispatchEvent(i)}),this);t.forEach((function(t){var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!0,n,r||{}),t.dispatchEvent(i)}),this)};!function(){var e=t[0];if(e.getContext)l=Math.ceil(e.width/p),c=Math.ceil(e.height/p);else{var r=e.getBoundingClientRect();l=Math.ceil(r.width/p),c=Math.ceil(r.height/p)}if(D("wordcloudstart",!0)){var i,a,o,u,m;if(f=n.origin?[n.origin[0]/p,n.origin[1]/p]:[l/2,c/2],d=Math.floor(Math.sqrt(l*l+c*c)),s=[],!e.getContext||n.clearCanvas)for(t.forEach((function(t){if(t.getContext){var e=t.getContext("2d");e.fillStyle=n.backgroundColor,e.clearRect(0,0,l*(p+1),c*(p+1)),e.fillRect(0,0,l*(p+1),c*(p+1))}else t.textContent="",t.style.backgroundColor=n.backgroundColor,t.style.position="relative"})),i=l;i--;)for(s[i]=[],a=c;a--;)s[i][a]=!0;else{var g=document.createElement("canvas").getContext("2d");g.fillStyle=n.backgroundColor,g.fillRect(0,0,1,1);var v,y,x=g.getImageData(0,0,1,1).data,w=e.getContext("2d").getImageData(0,0,l*p,c*p).data;for(i=l;i--;)for(s[i]=[],a=c;a--;){y=p;t:for(;y--;)for(v=p;v--;)for(o=4;o--;)if(w[4*((a*p+y)*l*p+(i*p+v))+o]!==x[o]){s[i][a]=!1;break t}!1!==s[i][a]&&(s[i][a]=!0)}w=g=x=void 0}if(n.hover||n.click){for(b=!0,i=l+1;i--;)S[i]=[];n.hover&&e.addEventListener("mousemove",I),n.click&&(e.addEventListener("click",_),e.addEventListener("touchstart",_),e.addEventListener("touchend",(function(t){t.preventDefault()})),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",(function t(){e.removeEventListener("wordcloudstart",t),e.removeEventListener("mousemove",I),e.removeEventListener("click",_),M=void 0}))}o=0,0!==n.wait?(u=window.setTimeout,m=window.clearTimeout):(u=window.setImmediate,m=window.clearImmediate);var C=function(e,n){t.forEach((function(t){t.removeEventListener(e,n)}),this)},O=function t(){C("wordcloudstart",t),m(T)};!function(e,n){t.forEach((function(t){t.addEventListener(e,n)}),this)}("wordcloudstart",O);var T=u((function t(){if(o>=n.list.length)return m(T),D("wordcloudstop",!1),void C("wordcloudstart",O);h=(new Date).getTime();var e=N(n.list[o]),r=!D("wordclouddrawn",!0,{item:n.list[o],drawn:e});if(A()||r)return m(T),n.abort(),D("wordcloudabort",!1),D("wordcloudstop",!1),void C("wordcloudstart",O);o++,T=u(t,n.wait)}),n.wait)}}()}function R(t,e){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-t)+t).toFixed()+"%)"}}).isSupported=i,u.minFontSize=a,void 0===(r=function(){return u}.apply(e,[]))||(t.exports=r)}])}));